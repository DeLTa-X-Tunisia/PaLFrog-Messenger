import{b as f,j as s}from"./index-1a54a5af.js";const j=()=>{const{transfers:d,clearCompleted:o,cancelTransfer:x}=f(),a=Array.from(d.values()),m=a.filter(e=>e.status==="pending"||e.status==="transferring"),n=a.filter(e=>e.status==="completed"||e.status==="failed"||e.status==="cancelled"),l=e=>{if(e===0)return"0 B";const r=1024,t=["B","KB","MB","GB"],c=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,c)).toFixed(2))+" "+t[c]},u=e=>l(e)+"/s",h=e=>{switch(e){case"completed":return"text-green-500";case"failed":return"text-red-500";case"cancelled":return"text-yellow-500";case"transferring":return"text-blue-500";default:return"text-gray-500"}},i=e=>{switch(e){case"completed":return"‚úÖ";case"failed":return"‚ùå";case"cancelled":return"‚èπÔ∏è";case"transferring":return"üîÑ";default:return"‚è≥"}},p=e=>{if(e.status!=="completed")return;const r=URL.createObjectURL(e.file),t=document.createElement("a");t.href=r,t.download=e.file.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r)};return a.length===0?null:s.jsxs("div",{className:"fixed bottom-4 right-4 w-80 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-96 overflow-hidden z-50",children:[s.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Transferts de fichiers"}),n.length>0&&s.jsx("button",{onClick:o,className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Effacer termin√©s"})]}),s.jsxs("div",{className:"overflow-y-auto max-h-80",children:[m.map(e=>s.jsxs("div",{className:"p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx("span",{className:"text-sm",children:i(e.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.direction==="sending"?"‚Üí Envoi √† ":"‚Üê R√©ception de ",e.peerId]})]})]}),e.status==="transferring"&&s.jsx("button",{onClick:()=>x(e.id),className:"text-red-500 hover:text-red-700 transition-colors",title:"Annuler le transfert",children:"‚úï"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:s.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:[l(e.transferredBytes)," / ",l(e.totalBytes)]}),s.jsxs("span",{children:[e.speed>0&&u(e.speed),e.progress.toFixed(1),"%"]})]})]},e.id)),n.map(e=>s.jsxs("div",{className:"p-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx("span",{className:"text-sm",children:i(e.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.direction==="sending"?"‚Üí Envoy√© √† ":"‚Üê Re√ßu de ",e.peerId]})]})]}),e.status==="completed"&&s.jsx("button",{onClick:()=>p(e),className:"text-primary-500 hover:text-primary-700 transition-colors",title:"T√©l√©charger",children:"‚¨áÔ∏è"})]}),s.jsxs("div",{className:`text-xs ${h(e.status)}`,children:[e.status==="failed"&&`√âchec: ${e.error}`,e.status==="cancelled"&&"Transfert annul√©"]})]},e.id))]})]})};export{j as FileTransferList};
